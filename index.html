<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, orientation=landscape"><title>Airplane Battle Pro</title><style>*{margin:0;padding:0;box-sizing:border-box;touch-action:none}body{background:#000;overflow:hidden;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}#gameCanvas{display:block;background:linear-gradient(180deg,#0a0a2e 0%,#1a1a4e 30%,#2a2a6e 50%,#1a1a4e 70%,#0a0a2e 100%)}#joystickZone{position:fixed;left:30px;bottom:30px;width:160px;height:160px;pointer-events:auto;z-index:100}#joystickBase{position:absolute;width:140px;height:140px;border-radius:50%;background:radial-gradient(circle,rgba(0,200,255,0.15) 0%,rgba(0,100,200,0.05) 70%,transparent 100%);border:3px solid rgba(0,200,255,0.4);box-shadow:0 0 30px rgba(0,200,255,0.3),inset 0 0 20px rgba(0,200,255,0.1);left:10px;top:10px}#joystickStick{position:absolute;width:60px;height:60px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#00ffff 0%,#0088cc 50%,#004488 100%);border:3px solid rgba(255,255,255,0.8);left:50px;top:50px;box-shadow:0 0 25px rgba(0,255,255,0.8),0 0 50px rgba(0,200,255,0.4);transition:transform 0.05s}#shootBtn{position:fixed;right:40px;bottom:50px;width:110px;height:110px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#ff6666 0%,#cc0000 50%,#880000 100%);border:4px solid #ffaaaa;pointer-events:auto;z-index:100;display:flex;align-items:center;justify-content:center;box-shadow:0 0 40px rgba(255,0,0,0.6),inset 0 0 20px rgba(255,100,100,0.5);user-select:none}#shootBtn::before{content:"üî•";font-size:50px;filter:drop-shadow(0 0 10px rgba(255,255,0,0.8))}#shootBtn:active{transform:scale(0.92);background:radial-gradient(circle at 30% 30%,#ff8888 0%,#ee0000 50%,#aa0000 100%);box-shadow:0 0 50px rgba(255,0,0,0.8),inset 0 0 30px rgba(255,150,150,0.6)}.skillBtn{position:fixed;width:70px;height:70px;border-radius:50%;pointer-events:auto;z-index:100;display:flex;align-items:center;justify-content:center;font-size:30px;box-shadow:0 0 25px rgba(0,0,0,0.5),inset 0 0 15px rgba(255,255,255,0.2);user-select:none;border:3px solid;transition:all 0.2s}.skillBtn:active{transform:scale(0.9)}.skillBtn.cooldown{opacity:0.4;filter:grayscale(0.8)}#skillLaser{right:160px;bottom:180px;background:radial-gradient(circle at 30% 30%,#ffdd00 0%,#ff8800 50%,#cc4400 100%);border-color:#ffee88;box-shadow:0 0 30px rgba(255,200,0,0.6)}#skillSpread{right:40px;bottom:180px;background:radial-gradient(circle at 30% 30%,#00ff88 0%,#00aa44 50%,#006622 100%);border-color:#88ffaa;box-shadow:0 0 30px rgba(0,255,100,0.6)}#skillShield{right:160px;bottom:280px;background:radial-gradient(circle at 30% 30%,#0088ff 0%,#0044cc 50%,#002288 100%);border-color:#88ccff;box-shadow:0 0 30px rgba(0,100,255,0.6)}#skillFlame{right:40px;bottom:280px;background:radial-gradient(circle at 30% 30%,#ff4400 0%,#cc2200 50%,#881100 100%);border-color:#ff8844;box-shadow:0 0 30px rgba(255,50,0,0.6)}.screen{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(10,10,40,0.98) 0%,rgba(20,20,60,0.98) 50%,rgba(10,10,40,0.98) 100%);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:200}.screen.hidden{display:none!important}h1{font-size:3.5rem;background:linear-gradient(45deg,#00ffff,#ff00ff,#ffff00,#00ffff);background-size:300% 300%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:gradient 3s ease infinite;text-shadow:0 0 40px rgba(0,255,255,0.5);margin-bottom:40px;letter-spacing:3px}@keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}.btn{padding:18px 50px;margin:12px;font-size:1.3rem;font-weight:bold;background:linear-gradient(135deg,#0088aa 0%,#00ffff 50%,#0088aa 100%);background-size:200% 200%;border:none;border-radius:35px;color:#001122;cursor:pointer;box-shadow:0 0 30px rgba(0,255,255,0.5),0 5px 15px rgba(0,0,0,0.3);transition:all 0.3s;text-transform:uppercase;letter-spacing:2px}.btn:hover{transform:translateY(-3px);box-shadow:0 0 40px rgba(0,255,255,0.7),0 8px 20px rgba(0,0,0,0.4);background-position:100% 100%}.btn:active{transform:translateY(0) scale(0.98)}input{padding:18px;font-size:1.8rem;width:220px;text-align:center;border:3px solid #00ffff;background:rgba(0,20,40,0.8);color:#00ffff;border-radius:15px;margin:15px;box-shadow:0 0 20px rgba(0,255,255,0.3),inset 0 0 10px rgba(0,255,255,0.1);letter-spacing:8px;font-weight:bold}input:focus{outline:none;box-shadow:0 0 30px rgba(0,255,255,0.5),inset 0 0 15px rgba(0,255,255,0.2)}#hud{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:50}#healthBar{position:absolute;top:25px;left:25px;width:250px;height:25px;background:rgba(0,0,0,0.6);border:2px solid #00ffff;border-radius:12px;overflow:hidden;box-shadow:0 0 15px rgba(0,255,255,0.3)}#healthFill{height:100%;width:100%;background:linear-gradient(90deg,#ff0044 0%,#ff8800 30%,#ffff00 60%,#00ff44 100%);box-shadow:0 0 10px rgba(0,255,100,0.5);transition:width 0.3s}#scoreDisplay{position:absolute;top:25px;right:25px;color:#fff;font-size:1.8rem;font-weight:bold;text-shadow:0 0 15px rgba(0,255,255,0.8),0 0 30px rgba(0,200,255,0.5);background:rgba(0,20,40,0.6);padding:10px 25px;border-radius:25px;border:2px solid rgba(0,255,255,0.4)}#roomCode{position:absolute;top:70px;left:50%;transform:translateX(-50%);color:#ffdd00;font-size:1.3rem;font-weight:bold;text-shadow:0 0 15px rgba(255,220,0,0.8);background:rgba(0,0,0,0.5);padding:8px 20px;border-radius:20px;border:2px solid rgba(255,220,0,0.4)}.skillBar{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);display:flex;gap:15px;background:rgba(0,0,0,0.7);padding:15px 25px;border-radius:20px;border:2px solid rgba(0,255,255,0.3)}.skillIcon{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;border:2px solid;opacity:0.5;transition:all 0.3s}.skillIcon.active{opacity:1;transform:scale(1.1);box-shadow:0 0 20px currentColor}.hidden{display:none!important}@media (orientation:portrait){body::before{content:"üì± ËØ∑ÊóãËΩ¨ÊâãÊú∫‰∏∫Ê®™Â±è";position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);color:#00ffff;font-size:2rem;font-weight:bold;z-index:9999;background:rgba(0,10,30,0.95);padding:30px 50px;border-radius:20px;border:3px solid #00ffff;box-shadow:0 0 40px rgba(0,255,255,0.5);text-align:center}}</style></head><body><canvas id="gameCanvas"></canvas><div id="joystickZone"><div id="joystickBase"></div><div id="joystickStick"></div></div><div id="shootBtn"></div><div id="skillLaser" class="skillBtn">‚ö°</div><div id="skillSpread" class="skillBtn">üí•</div><div id="skillShield" class="skillBtn">üõ°Ô∏è</div><div id="skillFlame" class="skillBtn">üî•</div><div id="hud" class="hidden"><div id="healthBar"><div id="healthFill"></div></div><div id="scoreDisplay">Score: 0</div><div id="roomCode"></div></div><div id="mainMenu" class="screen"><h1>‚úàÔ∏è AIRPLANE BATTLE PRO</h1><button class="btn" onclick="createRoom()">ÂàõÂª∫ÊàøÈó¥</button><button class="btn" onclick="showScreen('joinScreen')">Âä†ÂÖ•ÊàøÈó¥</button></div><div id="joinScreen" class="screen hidden"><h1>Âä†ÂÖ•ÊàøÈó¥</h1><input type="text" id="roomInput" placeholder="ËæìÂÖ•4‰ΩçÊàøÈó¥Âè∑" maxlength="4"><button class="btn" onclick="joinRoom()">Âä†ÂÖ•</button><button class="btn" onclick="showScreen('mainMenu')">ËøîÂõû</button></div><div id="gameScreen" class="screen hidden" style="background:transparent;"></div><script>const canvas=document.getElementById('gameCanvas'),ctx=canvas.getContext('2d');function resize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight}resize();window.addEventListener('resize',resize);let gameState='menu',roomCode='',score=0,health=100,frameCount=0;const player={x:canvas.width/2,y:canvas.height-120,width:50,height:60,speed:12,vx:0,vy:0,bullets:[],lastShot:0,shootCooldown:100,skills:{laser:{active:false,duration:0,cooldown:0,cdTime:8000},spread:{active:false,duration:0,cooldown:0,cdTime:6000},shield:{active:false,duration:0,cooldown:0,cdTime:10000},flame:{active:false,duration:0,cooldown:0,cdTime:5000}}}};let enemies=[],enemySpawnTimer=0,particles=[],stars=[];for(let i=0;i<150;i++)stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,size:Math.random()*2+0.5,speed:Math.random()*0.8+0.2,brightness:Math.random()});const joystick={active:false,startX:0,startY:0,currentX:0,currentY:0,dx:0,dy:0};const joystickZone=document.getElementById('joystickZone'),joystickStick=document.getElementById('joystickStick');joystickZone.addEventListener('touchstart',e=>{e.preventDefault();const touch=e.touches[0],rect=joystickZone.getBoundingClientRect();joystick.active=true;joystick.startX=rect.left+80;joystick.startY=rect.top+80;joystick.currentX=touch.clientX;joystick.currentY=touch.clientY;updateJoystick()});joystickZone.addEventListener('touchmove',e=>{e.preventDefault();if(!joystick.active)return;joystick.currentX=e.touches[0].clientX;joystick.currentY=e.touches[0].clientY;updateJoystick()});joystickZone.addEventListener('touchend',e=>{e.preventDefault();joystick.active=false;joystick.dx=0;joystick.dy=0;joystickStick.style.transform='translate(0px,0px)'});let mouseDown=false;joystickZone.addEventListener('mousedown',e=>{mouseDown=true;const rect=joystickZone.getBoundingClientRect();joystick.active=true;joystick.startX=rect.left+80;joystick.startY=rect.top+80;joystick.currentX=e.clientX;joystick.currentY=e.clientY;updateJoystick()});window.addEventListener('mousemove',e=>{if(!mouseDown)return;joystick.currentX=e.clientX;joystick.currentY=e.clientY;updateJoystick()});window.addEventListener('mouseup',()=>{mouseDown=false;joystick.active=false;joystick.dx=0;joystick.dy=0;joystickStick.style.transform='translate(0px,0px)'});function updateJoystick(){const maxDist=40;let dx=joystick.currentX-joystick.startX,dy=joystick.currentY-joystick.startY;const dist=Math.sqrt(dx*dx+dy*dy);if(dist>maxDist){dx=(dx/dist)*maxDist;dy=(dy/dist)*maxDist}joystick.dx=dx/maxDist;joystick.dy=dy/maxDist;joystickStick.style.transform=`translate(${dx}px,${dy}px)`}const shootBtn=document.getElementById('shootBtn');let shooting=false;shootBtn.addEventListener('touchstart',e=>{e.preventDefault();shooting=true});shootBtn.addEventListener('touchend',e=>{e.preventDefault();shooting=false});shootBtn.addEventListener('mousedown',()=>shooting=true);shootBtn.addEventListener('mouseup',()=>shooting=false);shootBtn.addEventListener('mouseleave',()=>shooting=false);document.getElementById('skillLaser').addEventListener('touchstart',e=>{e.preventDefault();useSkill('laser')});document.getElementById('skillLaser').addEventListener('click',()=>useSkill('laser'));document.getElementById('skillSpread').addEventListener('touchstart',e=>{e.preventDefault();useSkill('spread')});document.getElementById('skillSpread').addEventListener('click',()=>useSkill('spread'));document.getElementById('skillShield').addEventListener('touchstart',e=>{e.preventDefault();useSkill('shield')});document.getElementById('skillShield').addEventListener('click',()=>useSkill('shield'));document.getElementById('skillFlame').addEventListener('touchstart',e=>{e.preventDefault();useSkill('flame')});document.getElementById('skillFlame').addEventListener('click',()=>useSkill('flame'));function useSkill(skillName){const skill=player.skills[skillName];if(Date.now()-skill.cooldown<skill.cdTime||skill.active)return;skill.cooldown=Date.now();skill.active=true;switch(skillName){case'laser':skill.duration=180;break;case'spread':skill.duration=300;break;case'shield':skill.duration=400;break;case'flame':skill.duration=240;break}document.getElementById('skill'+skillName.charAt(0).toUpperCase()+skillName.slice(1)).classList.add('cooldown');setTimeout(()=>document.getElementById('skill'+skillName.charAt(0).toUpperCase()+skillName.slice(1)).classList.remove('cooldown'),skill.cdTime)}const keys={};window.addEventListener('keydown',e=>keys[e.key]=true);window.addEventListener('keyup',e=>keys[e.key]=false);function showScreen(id){document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden'));document.getElementById(id).classList.remove('hidden')}function createRoom(){roomCode=Math.floor(1000+Math.random()*9000).toString();document.getElementById('roomCode').textContent='Room: '+roomCode;startGame()}function joinRoom(){roomCode=document.getElementById('roomInput').value;if(roomCode.length===4){document.getElementById('roomCode').textContent='Room: '+roomCode;startGame()}}function startGame(){gameState='playing';showScreen('gameScreen');document.getElementById('hud').classList.remove('hidden');document.getElementById('joystickZone').style.display='block';document.getElementById('shootBtn').style.display='flex';document.getElementById('skillLaser').style.display='flex';document.getElementById('skillSpread').style.display='flex';document.getElementById('skillShield').style.display='flex';document.getElementById('skillFlame').style.display='flex';player.x=canvas.width/2;player.y=canvas.height-120;player.bullets=[];Object.values(player.skills).forEach(skill=>{skill.active=false;skill.duration=0});enemies=[];score=0;health=100;gameLoop()}function createBullet(x,y,vx,vy,isEnemy=false,isFlame=false){return{x,y,vx,vy,isEnemy,isFlame,width:isFlame?20:4,height:isFlame?30:12,damage:isFlame?3:1}}function createEnemy(){const types=['basic','fast','tank','elite'];const type=types[Math.floor(Math.random()*types.length)];enemies.push({x:Math.random()*(canvas.width-60)+30,y:-60,width:type==='tank'?55:type==='elite'?50:40,height:type==='tank'?55:type==='elite'?50:40,type,hp:type==='tank'?5:type==='elite'?3:type==='fast'?1:2,maxHp:type==='tank'?5:type==='elite'?3:type==='fast'?1:2,speed:type==='fast'?5:type==='elite'?3:type==='tank'?2:3,shootTimer:0,wobble:Math.random()*Math.PI*2})}function createExplosion(x,y,color,size=1){for(let i=0;i<20*size;i++){const angle=(Math.PI*2*i)/(20*size),speed=Math.random()*5+2;particles.push({x,y,vx:Math.cos(angle)*speed,vy:Math.sin(angle)*speed,life:1,color,size:Math.random()*4*size+2})}}function createSparkle(x,y,color){particles.push({x,y,vx:(Math.random()-0.5)*3,vy:(Math.random()-0.5)*3,life:0.5+Math.random()*0.5,color,size:Math.random()*3+1})}function update(){if(gameState!=='playing')return;frameCount++;player.vx=joystick.dx*player.speed;player.vy=joystick.dy*player.speed;if(keys['ArrowLeft']||keys['a'])player.vx=-player.speed;if(keys['ArrowRight']||keys['d'])player.vx=player.speed;if(keys['ArrowUp']||keys['w'])player.vy=-player.speed;if(keys['ArrowDown']||keys['s'])player.vy=player.speed;player.x+=player.vx;player.y+=player.vy;player.x=Math.max(30,Math.min(canvas.width-30,player.x));player.y=Math.max(30,Math.min(canvas.height-30,player.y));Object.entries(player.skills).forEach(([name,skill])=>{if(skill.active){skill.duration--;if(skill.duration<=0)skill.active=false;if(name==='laser'){enemies.forEach((enemy,idx)=>{if(Math.abs(enemy.x-player.x)<40&&enemy.y<player.y){enemy.hp-=0.8;createSparkle(enemy.x,enemy.y,'#ffdd00');if(enemy.hp<=0){createExplosion(enemy.x,enemy.y,getEnemyColor(enemy.type),1.5);score+=enemy.type==='tank'?50:enemy.type==='elite'?40:20;enemies.splice(idx,1)}}})}if(name==='flame'&&frameCount%3===0){for(let i=-2;i<=2;i++)player.bullets.push(createBullet(player.x+i*15,player.y-30,0,-6,false,true))}}});if((shooting||keys[' '])&&!player.skills.laser.active){const now=Date.now();const cooldown=player.skills.spread.active?50:player.shootCooldown;if(now-player.lastShot>cooldown){player.lastShot=now;if(player.skills.spread.active){for(let i=-2;i<=2;i++)player.bullets.push(createBullet(player.x+i*8,player.y-30,i*2,-10))}else{player.bullets.push(createBullet(player.x-12,player.y-30,0,-12));player.bullets.push(createBullet(player.x+12,player.y-30,0,-12))}}}player.bullets=player.bullets.filter(b=>{b.x+=b.vx;b.y+=b.vy;return b.y>-20});enemySpawnTimer++;const spawnRate=Math.max(25,70-Math.floor(score/400));if(enemySpawnTimer>spawnRate){enemySpawnTimer=0;createEnemy()}enemies=enemies.filter((enemy,eIdx)=>{enemy.y+=enemy.speed;enemy.wobble+=0.05;enemy.x+=Math.sin(enemy.wobble)*0.5;enemy.shootTimer++;const shootRate=enemy.type==='elite'?50:enemy.type==='fast'?35:70;if(enemy.shootTimer>shootRate&&enemy.y>0&&enemy.y<canvas.height-200){enemy.shootTimer=0;if(player.skills.shield.active){createSparkle(player.x+Math.random()*40-20,player.y+Math.random()*40-20,'#0088ff')}else{if(enemy.type==='elite'){player.bullets.push(createBullet(enemy.x,enemy.y+20,0,7,true));player.bullets.push(createBullet(enemy.x-10,enemy.y+15,-1.5,6,true));player.bullets.push(createBullet(enemy.x+10,enemy.y+15,1.5,6,true)}else player.bullets.push(createBullet(enemy.x,enemy.y+20,0,6,true))}}for(let i=player.bullets.length-1;i>=0;i--){const b=player.bullets[i];if(b.isEnemy)continue;const dx=b.x-enemy.x,dy=b.y-enemy.y;if(Math.sqrt(dx*dx+dy*dy)<enemy.width/2+10){enemy.hp-=b.damage||1;player.bullets.splice(i,1);createSparkle(b.x,b.y,'#ffff00');if(enemy.hp<=0){createExplosion(enemy.x,enemy.y,getEnemyColor(enemy.type),enemy.type==='tank'?1.5:1);score+=enemy.type==='tank'?50:enemy.type==='elite'?40:enemy.type==='fast'?25:20;return false}}}const pdx=enemy.x-player.x,pdy=enemy.y-player.y;if(Math.sqrt(pdx*pdx+pdy*pdy)<enemy.width/2+player.width/2){if(player.skills.shield.active){createExplosion(enemy.x,enemy.y,'#0088ff',0.8);return false}else{health-=15;createExplosion(enemy.x,enemy.y,'#ff4444',1.2);return false}}return enemy.y<canvas.height+50});for(let i=player.bullets.length-1;i>=0;i--){const b=player.bullets[i];if(!b.isEnemy)continue;if(player.skills.shield.active){const dx=b.x-player.x,dy=b.y-player.y;if(Math.sqrt(dx*dx+dy*dy)<60){player.bullets.splice(i,1);createSparkle(b.x,b.y,'#0088ff');continue}}const dx=b.x-player.x,dy=b.y-player.y;if(Math.sqrt(dx*dx+dy*dy)<25){health-=8;player.bullets.splice(i,1);createExplosion(player.x,player.y,'#ff4444',0.8)}}particles=particles.filter(p=>{p.x+=p.vx;p.y+=p.vy;p.vx*=0.98;p.vy*=0.98;p.life-=0.02;return p.life>0});stars.forEach(star=>{star.y+=star.speed;if(star.y>canvas.height){star.y=0;star.x=Math.random()*canvas.width}});document.getElementById('healthFill').style.width=Math.max(0,health)+'%';document.getElementById('scoreDisplay').textContent='Score: '+score;if(health<=0){gameState='gameover';setTimeout(()=>{alert('Game Over! Score: '+score);location.reload()},500)}}function getEnemyColor(type){switch(type){case'fast':return'#ff8800';case'tank':return'#8844ff';case'elite':return'#ff44ff';default:return'#ff4444'}}function draw(){ctx.fillStyle='rgba(10,10,46,0.3)';ctx.fillRect(0,0,canvas.width,canvas.height);stars.forEach(star=>{ctx.fillStyle=`rgba(255,255,255,${star.brightness})`;ctx.fillRect(star.x,star.y,star.size,star.size)});if(gameState!=='playing')return;ctx.save();ctx.translate(player.x,player.y);if(player.skills.shield.active){ctx.strokeStyle='#0088ff';ctx.lineWidth=3;ctx.shadowBlur=20;ctx.shadowColor='#0088ff';ctx.beginPath();ctx.arc(0,0,45,0,Math.PI*2);ctx.stroke();ctx.fillStyle='rgba(0,100,255,0.2)';ctx.fill();ctx.shadowBlur=0}const flameHeight=20+Math.random()*15;ctx.fillStyle=`hsl(${200+Math.random()*40},100%,60%)`;ctx.beginPath();ctx.moveTo(-8,25);ctx.lineTo(0,25+flameHeight);ctx.lineTo(8,25);ctx.closePath();ctx.fill();ctx.shadowBlur=20;ctx.shadowColor='#00aaff';ctx.fillStyle='#00ffff';ctx.beginPath();ctx.ellipse(0,28,6,12,0,0,Math.PI*2);ctx.fill();ctx.shadowBlur=0;ctx.fillStyle='#4488cc';ctx.beginPath();ctx.moveTo(0,-30);ctx.lineTo(-20,15);ctx.lineTo(-12,25);ctx.lineTo(0,20);ctx.lineTo(12,25);ctx.lineTo(20,15);ctx.closePath();ctx.fill();ctx.fillStyle='#66ccff';ctx.beginPath();ctx.moveTo(0,-30);ctx.lineTo(-8,5);ctx.lineTo(0,0);ctx.lineTo(8,5);ctx.closePath();ctx.fill();ctx.fillStyle='#ffdd00';ctx.shadowBlur=15;ctx.shadowColor='#ffdd00';ctx.beginPath();ctx.ellipse(0,-5,6,10,0,0,Math.PI*2);ctx.fill();ctx.shadowBlur=0;ctx.strokeStyle='#00ffff';ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(-20,15);ctx.lineTo(-25,5);ctx.moveTo(20,15);ctx.lineTo(25,5);ctx.stroke();ctx.restore();if(player.skills.laser.active){ctx.save();ctx.shadowBlur=30;ctx.shadowColor='#ffdd00';ctx.strokeStyle='rgba(255,200,0,0.3)';ctx.lineWidth=25;ctx.beginPath();ctx.moveTo(player.x,player.y-30);ctx.lineTo(player.x,0);ctx.stroke();ctx.strokeStyle='rgba(255,220,100,0.6)';ctx.lineWidth=12;ctx.beginPath();ctx.moveTo(player.x,player.y-30);ctx.lineTo(player.x,0);ctx.stroke();ctx.strokeStyle='#ffffff';ctx.lineWidth=4;ctx.beginPath();ctx.moveTo(player.x,player.y-30);ctx.lineTo(player.x,0);ctx.stroke();for(let i=0;i<10;i++){const y=player.y-40-i*50;if(y>0){ctx.fillStyle='#ffff00';ctx.fillRect(player.x-3+Math.random()*6,y,6,6)}}ctx.restore()}if(player.skills.flame.active){ctx.save();ctx.translate(player.x,player.y-30);for(let i=-2;i<=2;i++){ctx.fillStyle=`hsl(${Math.random()*40+10},100%,50%)`;ctx.beginPath();ctx.moveTo(i*5,0);ctx.lineTo(i*5-8,-30-Math.random()*20);ctx.lineTo(i*5+8,-30-Math.random()*20);ctx.closePath();ctx.fill()}ctx.restore()}player.bullets.forEach(b=>{ctx.save();if(b.isFlame){ctx.fillStyle='#ff6600';ctx.shadowBlur=15;ctx.shadowColor='#ff4400';ctx.beginPath();ctx.arc(b.x,b.y,8,0,Math.PI*2);ctx.fill()}else if(b.isEnemy){ctx.shadowBlur=10;ctx.shadowColor='#ff4444';ctx.fillStyle='#ff6666';ctx.beginPath();ctx.arc(b.x,b.y,5,0,Math.PI*2);ctx.fill()}else{ctx.shadowBlur=12;ctx.shadowColor='#00ffff';ctx.fillStyle='#00ffff';ctx.fillRect(b.x-2,b.y-8,4,16);ctx.fillStyle='#ffffff';ctx.fillRect(b.x-1,b.y-6,2,12)}ctx.restore()});enemies.forEach(enemy=>{ctx.save();ctx.translate(enemy.x,enemy.y);const color=getEnemyColor(enemy.type);ctx.shadowBlur=15;ctx.shadowColor=color;ctx.fillStyle=color;ctx.beginPath();if(enemy.type==='fast'){ctx.moveTo(0,20);ctx.lineTo(-12,-15);ctx.lineTo(0,-10);ctx.lineTo(12,-15)}else if(enemy.type==='tank'){ctx.moveTo(0,25);ctx.lineTo(-22,-10);ctx.lineTo(-15,-20);ctx.lineTo(0,-15);ctx.lineTo(15,-20);ctx.lineTo(22,-10)}else if(enemy.type==='elite'){ctx.moveTo(0,25);ctx.lineTo(-18,0);ctx.lineTo(0,-25);ctx.lineTo(18,0)}else{ctx.moveTo(0,18);ctx.lineTo(-15,-12);ctx.lineTo(0,-8);ctx.lineTo(15,-12)}ctx.closePath();ctx.fill();ctx.fillStyle='#ffffff';ctx.beginPath();ctx.arc(0,0,5,0,Math.PI*2);ctx.fill();if(enemy.type==='tank'||enemy.type==='elite'){ctx.shadowBlur=0;ctx.fillStyle='#000';ctx.fillRect(-20,-35,40,5);ctx.fillStyle=enemy.hp>enemy.maxHp/2?'#0f0':'#f00';ctx.fillRect(-20,-35,40*(enemy.hp/enemy.maxHp),5)}ctx.restore()});particles.forEach(p=>{ctx.globalAlpha=p.life;ctx.fillStyle=p.color;ctx.fillRect(p.x-p.size/2,p.y-p.size/2,p.size,p.size)});ctx.globalAlpha=1}function gameLoop(){update();draw();requestAnimationFrame(gameLoop)}draw()</script></body></html>